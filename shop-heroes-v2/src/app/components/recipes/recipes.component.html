<div *ngIf="player.admin">
  <h3> Add a new Category of Recipes</h3>
  <form (ngSubmit)="addRecipeCategory(f)" [formGroup]="categoryForm">
    <label>Name :
      <input formControlName="name"/>
    </label>
    <button type="submit">
      Add
    </button>
  </form>
</div>


<div *ngIf="player.admin">
  <h3> Add a new Recipe</h3>
  <form (ngSubmit)="addRecipe(f)" [formGroup]="recipeForm">
    <label>Name :
      <input formControlName="name"/>
    </label>
    <br />
    <label>Golds :
      <input type="number" formControlName="golds"/>
    </label>
    <br />
    <label>Xp :
      <input type="number" formControlName="xp"/>
    </label>
    <br />
    <label>Level minimum :
      <input type="number" formControlName="minLevel"/>
    </label>
    <br />
    <label> Materials : <br />
    <div formArrayName="materials" *ngFor="let materialControl of getMaterialsFromForm().controls; let i = index">
      <div  [formGroupName]="i">
        <select formControlName="id">
          <option *ngFor="let material of materials" [ngValue]="material.id">
            {{material.name}}
          </option>
        </select>
        <input type="number" formControlName="quantity">
        <button type="button" (click)="onDeleteMaterial(i)">Delete material</button>
      </div>
    </div>
    <button type="button" (click)="onAddMaterial()">Add material</button>
    <br />
    </label>
    
    <label> Category :
      <select formControlName="category">
        <option *ngFor="let category of categories" [ngValue]="category">
          {{category.name}}
        </option>
      </select>
    </label>
    <br />
    <button type="submit">
      Add
    </button>
  </form>
</div>


<div>
  <h3>Recipes</h3>
  <select>
    <option (click)="getAllRecipes()">
      All
    </option>
    <option *ngFor="let category of categories" (click)="getRecipesByCategory(category)">
      {{category.name}}
    </option>
  </select>
  <div *ngFor="let recipe of recipes" class="recipe">
    {{recipe.name}} {{recipe.golds}} golds {{recipe.xp}} xp
    <button type="button" (click)="createRecipe()">Create</button>
    <p>
      <span *ngFor="let material of recipe.materials"> {{material.name}} {{material.quantity}}</span>
    </p>

  </div>
</div>
